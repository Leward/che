{
  "name": "org.eclipse.che.ws-agent",
  "version": "1.0.0",
  "dependencies": [],
  "properties": {
    "ports": "ws-agent.debug:4403/tcp,ws-agent:4401/tcp",
    "environment": "CHE_API_ENDPOINT=${machine.docker.che_api.endpoint},CHE_PROJECTS_ROOT=${che.machine.projects.internal.storage},CHE_LOCAL_CONF_DIR=$HOME/che/conf,JAVA_OPTS=${che.machine.java_opts},JAVA_HOME=$HOME/che/jre1.8.0_45"
  },
  "script": "BASE_DIR=$HOME/che\nLINUX_TYPE=`cat /etc/os-release | grep ^ID=`\nLINUX_VERSION=`cat /etc/os-release | grep ^VERSION=`\n\nshopt -s nocasematch\n\n###############################\n### Install Needed packaged ###\n###############################\n\n# Red Hat Enterprise Linux 7 \n############################\nif echo $LINUX_TYPE | grep -qi \"rhel\"; then\n    sudo yum install tar wget\n\n# Ubuntu 14.04 16.04 / Linux Mint 17 \n####################################\nelif echo $LINUX_TYPE | grep -qi \"ubuntu\"; then\n    sudo apt-get update\n    sudo apt-get -y install tar wget\n\n# Debian 8\n##########\nelif echo $LINUX_TYPE | grep -qi \"debian\"; then\n    sudo apt-get update\n    sudo apt-get -y install tar wget\n\n# Fedora 23 \n###########\nelif echo $LINUX_TYPE | grep -qi \"fedora\"; then\n    sudo yum -y install tar wget\n\n# CentOS 7.1 & Oracle Linux 7.1\n###############################\nelif echo $LINUX_TYPE | grep -qi \"centos\"; then\n    sudo yum -y install tar wget\n\n# openSUSE 13.2\n###############\nelif echo $LINUX_TYPE | grep -qi \"opensuse\"; then\n    sudo zypper install -y tar wget\n\n# Alpine 3.3\n############$$\nelif echo $LINUX_TYPE | grep -qi \"alpine\"; then\n    sudo apk update\n    sudo apk add tar wget\n\nelse\n    >&2 echo \"Unrecognized Linux Type\"\n    >&2 cat /etc/os-release\n    exit 1\nfi\n\n\nmkdir -p $BASE_DIR\nsudo mkdir -p /projects\nsudo sh -c \"chown -R $(id -u -n) /projects\"\n\n####################\n### Install JAVA ###\n####################\n\nJRE_URL=http://download.oracle.com/otn-pub/java/jdk/8u45-b14/jre-8u45-linux-x64.tar.gz\nwget -qO - --no-cookies --no-check-certificate --header \"Cookie: oraclelicense=accept-securebackup-cookie\" \"${JRE_URL}\" | tar -C $BASE_DIR -xzf -\n\nmkdir -p $BASE_DIR/ws-agent\nwget  -qO - https://codenvy.com/update/repository/public/download/org.eclipse.che.ws-agent.binaries | tar -C $BASE_DIR/ws-agent -xzf -\n\nJPDA_ADDRESS=4403 && $BASE_DIR/ws-agent/bin/catalina.sh jpda run"
}
